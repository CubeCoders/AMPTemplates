[
    {
        "UpdateStageName": "Node.js Download",
        "UpdateSourcePlatform": "Windows",
        "UpdateSource": "FetchURL",
        "UpdateSourceData": "https://nodejs.org/download/release/v20.15.1/node-v20.15.1-win-x64.zip",
        "UpdateSourceTarget": "{{$FullRootDir}}",
        "UnzipUpdateSource": true,
        "OverwriteExistingFiles": true,
        "DeleteAfterExtract": true,
        "OneShot": true
    },
    {
        "UpdateStageName": "Node.js Download",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "FetchURL",
        "UpdateSourceData": "https://nodejs.org/download/release/v20.15.1/node-v20.15.1-linux-x64.tar.gz",
        "UpdateSourceTarget": "{{$FullRootDir}}",
        "OverwriteExistingFiles": true,
        "OneShot": true
    },
    {
        "UpdateStageName": "Node.js Extract",
        "UpdateSourcePlatform": "Windows",
        "UpdateSource": "Executable",
        "UpdateSourceData": "cmd.exe",
        "UpdateSourceArgs": "/C cd bdsx && rmdir /S /Q node > NUL 2>&1 & rename node-v20.15.1-win-x64 node",
        "SkipOnFailure": false,
        "OneShot": true
    },
    {
        "UpdateStageName": "Node.js Extract",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"cd bdsx && rm -rf node >/dev/null 2>&1 && tar xfv node-v20.15.1-linux-x64.tar.gz >/dev/null 2>&1 && mv node-v20.15.1-linux-x64 node >/dev/null 2>&1 && rm node-v20.15.1-linux-x64.tar.gz\"",
        "SkipOnFailure": false,
        "OneShot": true
    },
    {
        "UpdateStageName": "BDSX Installation",
        "UpdateSourcePlatform": "Windows",
        "UpdateSource": "Executable",
        "UpdateSourceData": "cmd.exe",
        "UpdateSourceArgs": "/C cd bdsx && if not exist temp mkdir temp && git clone https://github.com/bdsx/bdsx.git temp && xcopy temp\\.git server\\.git /E /H /Y /I && rd /S /Q temp && cd server && git restore . && set PATH={{$FullRootDir}}node;%PATH% && npm i && node_modules\\.bin\\tsc",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "BDSX Installation",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"cd bdsx && mkdir -p temp && git clone https://github.com/bdsx/bdsx.git temp >/dev/null 2>&1 && \\cp -rf temp/.git server/ && rm -rf temp && cd server && git restore . && export PATH={{$FullRootDir}}node/bin:$PATH && npm i && node_modules/.bin/tsc\"",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Initialise Wine",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"WINEPREFIX=\\\"{{$FullRootDir}}.wine\\\" WINEARCH=win64 WINEDEBUG=-all /usr/bin/wineboot --init --update\"",
        "SkipOnFailure": false
    }
]