[
    {
        "UpdateStageName": "Initialise Wine",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"export XDG_RUNTIME_DIR=/tmp/xdg_runtime_amp; export WINEARCH=win64 WINEDEBUG=-all; export WINEPREFIX=\\\"{{$FullRootDir}}.wine\\\"; /usr/bin/wineboot --init --update; /usr/bin/wine reg add \\\"HKLM\\System\\CurrentControlSet\\Control\\FileSystem\\\" /v \\\"LongPathsEnabled\\\" /t REG_DWORD /d 1 /f; /usr/bin/wineboot --shutdown --force; /usr/bin/wineboot --kill --force\"",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "DCS World Modular Server Download",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "FetchURL",
        "UpdateSourceData": "https://www.digitalcombatsimulator.com/upload/iblock/e0e/anj9iu7zs26ikw81hj18obkxmyhqx2be/DCS_World_Server_modular.exe",
        "UpdateSourceTarget": "{{$FullBaseDir}}",
        "OverwriteExistingFiles": true,
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Base Server Installation",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"export XDG_RUNTIME_DIR=/tmp/xdg_runtime_amp; cd dcs-world/server && [[ ! -d \\\"{{$FullRootDir}}.wine/drive_c/DCSWorld\\\" ]] && WINEPREFIX=\\\"{{$FullRootDir}}.wine\\\" WINEARCH=win64 WINEDEBUG=-all /usr/bin/wine DCS_World_Server_modular.exe /suppressmsgboxes /sp- /verysilent /lang=en /noicons /type=compact /dir=C:\\DCSWorld || exit 0\"",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Create Symlinks",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"cd dcs-world/server && ln -sf \\\"../.wine/drive_c/DSCWorld\\\" ./ >/dev/null 2>&1\"",
        "SkipOnFailure": false
    }
]