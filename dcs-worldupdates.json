[
    {
        "UpdateStageName": "Initialise Wine",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"WINEPREFIX=\\\"{{$FullRootDir}}.wine\\\" WINEARCH=win64 WINEDEBUG=-all /usr/bin/wineboot --init --update\"",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Create Installation Directory",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "CreateDirectory",
        "UpdateSourceArgs": "{{$FullRootDir}}.wine/drive_c/Program Files/Eagle Dynamics/DCS World Server/bin",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Create Config Directory",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "CreateDirectory",
        "UpdateSourceArgs": "{{$FullRootDir}}.wine/drive_c/Program Files/Eagle Dynamics/DCS World Server/Config",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Create Saved Directory",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "CreateDirectory",
        "UpdateSourceArgs": "{{$FullRootDir}}.wine/drive_c/users/amp/Saved Games/DCS.dcs_serverrelease",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Create lang.txt",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "CreateFile",
        "UpdateSourceArgs": "{{$FullRootDir}}.wine/drive_c/Program Files/Eagle Dynamics/DCS World Server/Config/lang.txt",
        "UpdateSourceData": "EN",
        "OverwriteExistingFiles": false,
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Create autoupdate.cfg",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "CreateFile",
        "UpdateSourceArgs": "{{$FullRootDir}}.wine/drive_c/Program Files/Eagle Dynamics/DCS World Server/autoupdate.cfg",
        "UpdateSourceData": "{\"WARNING\": \"DO NOT EDIT this file. You may break your install!\", \"branch\": \"dcs_server.release\", \"arch\": \"x86_64\", \"lang\": \"EN\", \"modules\": [\"WORLD\"], \"launch\": null}",
        "OverwriteExistingFiles": false,
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Create Symlinks",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"cd dcs-world/server && ln -sf \\\"../.wine/drive_c/Program Files/Eagle Dynamics/DCS World Server\\\" ./ >/dev/null 2>&1 && ln -sf \\\"../.wine/drive_c/users/amp/Saved Games/DCS.dcs_serverrelease\\\" ./Saves >/dev/null 2>&1\"",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "DCS World Updater Download",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "FetchURL",
        "UpdateSourceData": "https://updates.digitalcombatsimulator.com/files/DCS_updater_64bit.zip",
        "UpdateSourceTarget": "{{$FullBaseDir}}DCS World Server/bin",
        "UnzipUpdateSource": true,
        "OverwriteExistingFiles": true,
        "DeleteAfterExtract": true,
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Server Installation",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"cd dcs-world/server/DCS World Server/bin && mv -f DCS_updater.exe DCS_updater_initial.exe && WINEPREFIX=\\\"{{$FullRootDir}}.wine\\\" WINEARCH=win64 WINEDEBUG=-all /usr/bin/wine DCS_updater_initial.exe --quiet update && mv -f DCS_updater_initial.exe DCS_updater.exe\"",
        "SkipOnFailure": false
    }
]