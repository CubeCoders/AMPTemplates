[
    {
        "UpdateStageName": "Create Download Directory",
        "UpdateSourcePlatform": "All",
        "UpdateSource": "CreateDirectory",
        "UpdateSourceArgs": "{{$FullRootDir}}srv"
    },
    {
        "UpdateStageName": "Server Download",
        "UpdateSourcePlatform": "All",
        "UpdateSource": "FetchURL",
        "UpdateSourceData": "https://download.taleworlds.com/mb_warband_dedicated_1174.zip",
        "UpdateSourceTarget": "{{$FullRootDir}}srv",
        "UnzipUpdateSource": true,
        "OverwriteExistingFiles": true,
        "DeleteAfterExtract": true
    },
    {
        "UpdateStageName": "Server Installation",
        "UpdateSourcePlatform": "Windows",
        "UpdateSource": "Executable",
        "UpdateSourceData": "powershell.exe",
        "UpdateSourceArgs": "-NoProfile -Command \"Set-Location -Path 'mountbladewarband'; Copy-Item -Path 'srv/mb_warband_dedicated_1174/Mount&Blade Warband Dedicated/*' -Destination 'server' -Recurse -Force -ErrorAction SilentlyContinue | Out-Null; Remove-Item -Path 'srv' -Recurse -Force -ErrorAction SilentlyContinue | Out-Null\"",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Server Installation",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"cd mountbladewarband && \\cp -rf \\\"srv/mb_warband_dedicated_1174/Mount&Blade Warband Dedicated/\\\"* server/ >/dev/null 2>&1; rm -rf srv >/dev/null 2>&1\"",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Sample_Battle.txt Copy",
        "UpdateSourcePlatform": "All",
        "UpdateSource": "CopyFilePath",
        "UpdateSourceData": "{{$FullBaseDir}}AMP_Battle.txt",
        "UpdateSourceArgs": "{{$FullBaseDir}}Sample_Battle.txt",
        "OverwriteExistingFiles": false
    },
    {
        "UpdateStageName": "Sample_Capture_the_Flag.txt Copy",
        "UpdateSourcePlatform": "All",
        "UpdateSource": "CopyFilePath",
        "UpdateSourceData": "{{$FullBaseDir}}AMP_Capture_the_Flag.txt",
        "UpdateSourceArgs": "{{$FullBaseDir}}Sample_Capture_the_Flag.txt",
        "OverwriteExistingFiles": false
    },
    {
        "UpdateStageName": "Sample_Conquest.txt Copy",
        "UpdateSourcePlatform": "All",
        "UpdateSource": "CopyFilePath",
        "UpdateSourceData": "{{$FullBaseDir}}AMP_Conquest.txt",
        "UpdateSourceArgs": "{{$FullBaseDir}}Sample_Conquest.txt",
        "OverwriteExistingFiles": false
    },
    {
        "UpdateStageName": "Sample_Deathmatch.txt Copy",
        "UpdateSourcePlatform": "All",
        "UpdateSource": "CopyFilePath",
        "UpdateSourceData": "{{$FullBaseDir}}AMP_Deathmatch.txt",
        "UpdateSourceArgs": "{{$FullBaseDir}}Sample_Deathmatch.txt",
        "OverwriteExistingFiles": false
    },
    {
        "UpdateStageName": "Sample_Duel.txt Copy",
        "UpdateSourcePlatform": "All",
        "UpdateSource": "CopyFilePath",
        "UpdateSourceData": "{{$FullBaseDir}}AMP_Duel.txt",
        "UpdateSourceArgs": "{{$FullBaseDir}}Sample_Duel.txt",
        "OverwriteExistingFiles": false
    },
    {
        "UpdateStageName": "Sample_Fight_and_Destroy.txt Copy",
        "UpdateSourcePlatform": "All",
        "UpdateSource": "CopyFilePath",
        "UpdateSourceData": "{{$FullBaseDir}}AMP_Fight_and_Destroy.txt",
        "UpdateSourceArgs": "{{$FullBaseDir}}Sample_Fight_and_Destroy.txt",
        "OverwriteExistingFiles": false
    },
    {
        "UpdateStageName": "Sample_Invasion.txt Copy",
        "UpdateSourcePlatform": "All",
        "UpdateSource": "CopyFilePath",
        "UpdateSourceData": "{{$FullBaseDir}}AMP_Invasion.txt",
        "UpdateSourceArgs": "{{$FullBaseDir}}Sample_Invasion.txt",
        "OverwriteExistingFiles": false
    },
    {
        "UpdateStageName": "Sample_Siege.txt Copy",
        "UpdateSourcePlatform": "All",
        "UpdateSource": "CopyFilePath",
        "UpdateSourceData": "{{$FullBaseDir}}AMP_Siege.txt",
        "UpdateSourceArgs": "{{$FullBaseDir}}Sample_Siege.txt",
        "OverwriteExistingFiles": false
    },
    {
        "UpdateStageName": "Sample_Team_Deathmatch.txt Copy",
        "UpdateSourcePlatform": "All",
        "UpdateSource": "CopyFilePath",
        "UpdateSourceData": "{{$FullBaseDir}}AMP_Team_Deathmatch.txt",
        "UpdateSourceArgs": "{{$FullBaseDir}}Sample_Team_Deathmatch.txt",
        "OverwriteExistingFiles": false
    },
    {
        "UpdateStageName": "Initialise Wine",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"WINEPREFIX=\\\"{{$FullRootDir}}.wine\\\" WINEARCH=win64 WINEDEBUG=-all /usr/bin/wineboot --init --update\""
    }
]