[
    {
        "UpdateStageName":"Remove EXILED Files",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"Executable",
        "UpdateSourceData":"/bin/bash",
        "UpdateSourceArgs":"-c 'cd scp-secret-laboratory/996560/AppData && rm -rf EXILED >/dev/null 2>&1 && cd \"SCP Secret Laboratory/PluginAPI/plugins/global\" && rm -rf \"Exiled Loader\" Exiled.Loader.dll dependencies/Exiled.API.dll >/dev/null 2>&1'",
        "UpdateSourceConditionSetting":"InstallEXILED",
        "UpdateSourceConditionValue":"false",
        "SkipOnFailure":true
    },
    {
        "UpdateStageName":"Remove EXILED Files",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"Executable",
        "UpdateSourceData":"cmd.exe",
        "UpdateSourceArgs":"/C cd scp-secret-laboratory\\996560\\AppData && rd /S /Q EXILED > NUL 2>&1 && cd \"SCP Secret Laboratory\\PluginAPI\\plugins\\global\" && rd /S /Q \"Exiled Loader\" > NUL 2>&1 & del /Q Exiled.Loader.dll dependencies\\Exiled.API.dll > NUL 2>&1",
        "UpdateSourceConditionSetting":"InstallEXILED",
        "UpdateSourceConditionValue":"false",
        "SkipOnFailure":true
    },
    {
        "UpdateStageName":"SteamCMD Server Download",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"SteamCMD",
        "UpdateSourceData":"996560",
        "UpdateSourceArgs":"700330",
        "UpdateSourceVersion":"{{ServerBranch}}"
    },
    {
        "UpdateStageName":"Config Directory Creation",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"CreateDirectory",
        "UpdateSourceArgs":"{{$FullBaseDir}}AppData/config/{{$GamePort}}"
    },
    {
        "UpdateStageName":"Gameplay Config Template Copy",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"CopyFilePath",
        "UpdateSourceData":"{{$FullBaseDir}}AppData/config/{{$GamePort}}/config_gameplay.txt",
        "UpdateSourceArgs":"{{$FullBaseDir}}ConfigTemplates/config_gameplay.template.txt",
        "OverwriteExistingFiles":false
    },
    {
        "UpdateStageName":"Remoteadmin Config Template Copy",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"CopyFilePath",
        "UpdateSourceData":"{{$FullBaseDir}}AppData/config/{{$GamePort}}/config_remoteadmin.txt",
        "UpdateSourceArgs":"{{$FullBaseDir}}ConfigTemplates/config_remoteadmin.template.txt",
        "OverwriteExistingFiles":false
    },
    {
        "UpdateStageName":"Hoster Policy File Creation",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"CreateFile",
        "UpdateSourceData":"gamedir_for_configs: true",
        "UpdateSourceArgs":"{{$FullBaseDir}}hoster_policy.txt",
        "OverwriteExistingFiles":true
    },
    {
        "UpdateStageName":"Download EXILED",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"GithubRelease",
        "UpdateSourceArgs":"Exiled-Team/EXILED",
        "UpdateSourceTarget":"{{$FullBaseDir}}AppData",
        "UpdateSourceData":"Exiled.tar.gz",
        "UnzipUpdateSource":true,
        "OverwriteExistingFiles":true,
        "DeleteAfterExtract":true,
        "UpdateSourceConditionSetting":"InstallEXILED",
        "UpdateSourceConditionValue":"true"
    },
    {
        "UpdateStageName":"EXILED Loader Directory Creation",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"CreateDirectory",
        "UpdateSourceArgs":"{{$FullBaseDir}}AppData/SCP Secret Laboratory/PluginAPI/plugins/global/Exiled Loader",
        "UpdateSourceConditionSetting":"InstallEXILED",
        "UpdateSourceConditionValue":"true"
    },
    {
        "UpdateStageName":"EXILED Loader Config.yml Download",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"FetchURL",
        "UpdateSourceData":"https://raw.githubusercontent.com/CubeCoders/AMPTemplates/main/scp-secret-laboratoryexiledconfig.yml",
        "UpdateSourceArgs":"config.yml",
        "UpdateSourceTarget":"{{$FullBaseDir}}AppData/SCP Secret Laboratory/PluginAPI/plugins/global/Exiled Loader",
        "OverwriteExistingFiles":false,
        "UpdateSourceConditionSetting":"InstallEXILED",
        "UpdateSourceConditionValue":"true"
    }
]
