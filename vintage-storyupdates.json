[
    {
        "UpdateStageName":  "Delete Server Directory",
        "UpdateSourcePlatform":  "Linux",
        "UpdateSource":  "Executable",
        "UpdateSourceData":  "/bin/bash",
        "UpdateSourceArgs":  "-c \u0027rm -rf {{$FullBaseDir}}server \u003e/dev/null 2\u003e\u00261\u0027",
        "SkipOnFailure":  true
    },
    {
        "UpdateStageName":  "Delete Server Directory",
        "UpdateSourcePlatform":  "Windows",
        "UpdateSource":  "Executable",
        "UpdateSourceData":  "cmd.exe",
        "UpdateSourceArgs":  "/C del /Q /F {{$FullBaseDir}}server \u003e NUL 2\u003e\u00261",
        "SkipOnFailure":  true
    },
    {
        "UpdateStageName":  "Server Directory Creation",
        "UpdateSourcePlatform":  "All",
        "UpdateSource":  "CreateDirectory",
        "UpdateSourceArgs":  "{{$FullBaseDir}}server"
    },
    {
        "UpdateStageName":  "Server Download",
        "UpdateSourcePlatform":  "All",
        "UpdateSource":  "FetchURL",
        "UpdateSourceData":  "https://cdn.vintagestory.at/gamefiles/stable/vs_server_{{ServerVersion}}.tar.gz",
        "UpdateSourceTarget":  "{{$FullBaseDir}}server",
        "UnzipUpdateSource":  true,
        "OverwriteExistingFiles":  true,
        "DeleteAfterExtract":  true
    },
    {
        "UpdateStageName":  "Start Server",
        "UpdateSourcePlatform":  "All",
        "UpdateSource":  "StartApplication"
    },
    {
        "UpdateStageName":  "Wait For Server Start",
        "UpdateSourcePlatform":  "All",
        "UpdateSource":  "WaitForStartupComplete"
    },
    {
        "UpdateStageName":  "Stop Server",
        "UpdateSourcePlatform":  "All",
        "UpdateSource":  "ShutdownApplication"
    }
]
