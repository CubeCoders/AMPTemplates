[
    {
        "UpdateStageName": "Delete Server Directory Contents",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"rm -rf {{$FullBaseDir}}*\""
    },
    {
        "UpdateStageName": "Delete Server Directory Contents",
        "UpdateSourcePlatform": "Windows",
        "UpdateSource": "Executable",
        "UpdateSourceData": "cmd.exe",
        "UpdateSourceArgs": "/C del /Q /F {{$FullBaseDir}}*"
    },
    {
        "UpdateStageName": "SteamCMD Game Download",
        "UpdateSourcePlatform": "All",
        "UpdateSource": "SteamCMD",
        "UpdateSourceData": "10",
        "UpdateSourceTarget": "{{$FullRootDir}}client"
    },
    {
        "UpdateStageName": "Game Directory Symlinks Creation",
        "UpdateSourcePlatform": "Windows",
        "UpdateSource": "Executable",
        "UpdateSourceData": "cmd.exe",
        "UpdateSourceArgs": "/C mklink /J \"{{$FullBaseDir}}valve\" \"{{$FullRootDir}}client\\valve\" && mklink /J \"{{$FullBaseDir}}cstrike\" \"{{$FullRootDir}}client\\cstrike\""
    },
    {
        "UpdateStageName": "Game Directory Symlinks Creation",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"cd \\\"{{$FullBaseDir}}\\\" && ln -sf \\\"../client/valve\\\" \\\"../client/cstrike\\\" ./\""
    },
    {
        "UpdateStageName": "Engine Download",
        "UpdateSourcePlatform": "Windows",
        "UpdateSource": "GithubRelease",
        "UpdateSourceArgs": "FWGS/xash3d-fwgs",
        "UpdateSourceData": "xash3d-fwgs-win32-i386.7z",
        "UpdateSourceVersion": "continuous",
        "UpdateSourceTarget": "{{$FullBaseDir}}",
        "UnzipUpdateSource": true,
        "OverwriteExistingFiles": true,
        "DeleteAfterExtract": true,
        "UpdateSourceConditionSetting": "EngineVersion",
        "UpdateSourceConditionValue": "new"
    },
    {
        "UpdateStageName": "Delete Engine Download Zip",
        "UpdateSourcePlatform": "Windows",
        "UpdateSource": "Executable",
        "UpdateSourceData": "cmd.exe",
        "UpdateSourceArgs": "/C del /Q /F \"{{$FullBaseDir}}xash3d-fwgs-win32-i386.7z\"",
        "UpdateSourceConditionSetting": "EngineVersion",
        "UpdateSourceConditionValue": "new",
        "SkipOnFailure": true
    },
    {
        "UpdateStageName": "Engine Download",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "GithubRelease",
        "UpdateSourceArgs": "FWGS/xash3d-fwgs",
        "UpdateSourceData": "xashds-linux-i386.tar.gz",
        "UpdateSourceVersion": "continuous",
        "UpdateSourceTarget": "{{$FullRootDir}}",
        "UnzipUpdateSource": true,
        "OverwriteExistingFiles": true,
        "DeleteAfterExtract": true,
        "UpdateSourceConditionSetting": "EngineVersion",
        "UpdateSourceConditionValue": "new"
    },
    {
        "UpdateStageName": "Engine Files Copy",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"\\cp -rf ./counter-strike/xashds-linux-i386/* ./counter-strike/server && rm -rf ./counter-strike/xashds-linux-i386/\"",
        "UpdateSourceConditionSetting": "EngineVersion",
        "UpdateSourceConditionValue": "new"
    },
    {
        "UpdateStageName": "Engine Download",
        "UpdateSourcePlatform": "Windows",
        "UpdateSource": "FetchURL",
        "UpdateSourceData": "https://github.com/FWGS/xash3d-deploy/raw/travis-master/xash3d-mingw.7z",
        "UpdateSourceTarget": "{{$FullBaseDir}}",
        "UnzipUpdateSource": true,
        "OverwriteExistingFiles": true,
        "DeleteAfterExtract": true,
        "UpdateSourceConditionSetting": "EngineVersion",
        "UpdateSourceConditionValue": "old"
    },
    {
        "UpdateStageName": "Delete Engine Download Zip",
        "UpdateSourcePlatform": "Windows",
        "UpdateSource": "Executable",
        "UpdateSourceData": "cmd.exe",
        "UpdateSourceArgs": "/C del /Q /F \"{{$FullBaseDir}}xash3d-mingw.7z\"",
        "UpdateSourceConditionSetting": "EngineVersion",
        "UpdateSourceConditionValue": "old",
        "SkipOnFailure": true
    },
    {
        "UpdateStageName": "Old Binary Copy",
        "UpdateSourcePlatform": "Windows",
        "UpdateSource": "Executable",
        "UpdateSourceData": "cmd.exe",
        "UpdateSourceArgs": "/C xcopy /E /Y /I counter-strike\\server\\xash_sdl.exe counter-strike\\server\\xash_3d.exe",
        "UpdateSourceConditionSetting": "EngineVersion",
        "UpdateSourceConditionValue": "old"
    },
    {
        "UpdateStageName": "7-Zip Directory Creation",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "CreateDirectory",
        "UpdateSourceArgs": "{{$FullRootDir}}7-Zip",
        "UpdateSourceConditionSetting": "EngineVersion",
        "UpdateSourceConditionValue": "old"
    },
    {
        "UpdateStageName": "7-Zip Download",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "FetchURL",
        "UpdateSourceData": "https://www.7-zip.org/a/7z2301-linux-x64.tar.xz",
        "UpdateSourceTarget": "{{$FullRootDir}}7-Zip",
        "OverwriteExistingFiles": true,
        "UpdateSourceConditionSetting": "EngineVersion",
        "UpdateSourceConditionValue": "old"
    },
    {
        "UpdateStageName": "7-Zip Files Extract",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"cd ./counter-strike/7-Zip && tar -xf 7z2301-linux-x64.tar.xz && rm -f 7z2301-linux-x64.tar.xz\"",
        "UpdateSourceConditionSetting": "EngineVersion",
        "UpdateSourceConditionValue": "old"
    },
    {
        "UpdateStageName": "Engine Download",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "FetchURL",
        "UpdateSourceData": "https://github.com/FWGS/xash3d-deploy/raw/travis-master/xash3d-linux.7z",
        "UpdateSourceTarget": "{{$FullBaseDir}}",
        "OverwriteExistingFiles": true,
        "UpdateSourceConditionSetting": "EngineVersion",
        "UpdateSourceConditionValue": "old"
    },
    {
        "UpdateStageName": "Engine Files Extract",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"cd ./counter-strike/server && ../7-Zip/7zzs x xash3d-linux.7z && rm -f xash3d-linux.7z\"",
        "UpdateSourceConditionSetting": "EngineVersion",
        "UpdateSourceConditionValue": "old"
    },
    {
        "UpdateStageName": "Old Binary Symlink",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"cd '{{$FullBaseDir}}' && ln -sf ./xash3d ./xash\"",
        "UpdateSourceConditionSetting": "EngineVersion",
        "UpdateSourceConditionValue": "old"
    }
]